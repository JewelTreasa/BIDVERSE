{% extends "base.html" %}

{% block content %}
<section class="section marketplace" style="padding: 120px 0 60px;">
    <div class="container">
        <div class="section-header" style="text-align: left; margin-bottom: 40px;">
            <h1
                style="font-family: 'Playfair Display', serif; font-size: 40px; color: var(--text-dark); margin-bottom: 10px;">
                Marketplace</h1>
            <p style="color: #666;">Explore all live and upcoming agricultural auctions across India.</p>
        </div>

        <div class="auction-grid"
            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 30px;">
            {% for auction in all_auctions %}
            <div class="auction-card"
                style="background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.05); transition: transform 0.3s ease;">
                <div class="card-image" style="position: relative; height: 200px;">
                    <img src="{{ auction.image_url|default:'/assets/images/placeholder-agri.jpg' }}"
                        alt="{{ auction.commodity }}" style="width: 100%; height: 100%; object-fit: cover;">
                    <span class="badge live"
                        style="position: absolute; top: 15px; right: 15px; background: #dc2626; color: white; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600;">LIVE</span>
                </div>
                <div class="card-content" style="padding: 20px;">
                    <h3 style="font-family: 'Playfair Display', serif; font-size: 20px; margin-bottom: 5px;">{{
                        auction.commodity }}</h3>
                    <p class="location" style="color: #666; font-size: 14px; margin-bottom: 15px;">
                        <i class="fas fa-layer-group"></i> {{ auction.quantity }} {{ auction.unit }}
                    </p>
                    <div
                        style="display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 20px; padding-top: 15px; border-top: 1px solid #eee;">
                        <div>
                            <span style="font-size: 12px; color: #999; display: block;">Current Bid</span>
                            <span style="font-size: 20px; font-weight: 700; color: var(--primary-green);">â‚¹{{
                                auction.current_highest_bid|default:auction.base_price }}</span>
                        </div>
                        <div style="text-align: right;">
                            <span style="font-size: 12px; color: #999; display: block;">Ends At</span>
                            <span style="font-size: 14px; font-weight: 500;">{{ auction.end_time|date:"M d, H:i"
                                }}</span>
                        </div>
                    </div>
                    <a href="{% url 'auction_detail' auction.id %}" class="btn btn-primary btn-block"
                        style="border-radius: 10px;">View Details</a>
                </div>
            </div>
            {% empty %}
            <div style="grid-column: 1/-1; text-align: center; padding: 100px 20px;">
                <i class="fas fa-search" style="font-size: 48px; color: #eee; margin-bottom: 20px; display: block;"></i>
                <h3 style="color: #666;">No active auctions found</h3>
                <p style="color: #999;">Check back later or try a different filter.</p>
                <a href="/" class="btn btn-outline" style="margin-top: 20px; display: inline-block;">Back to Home</a>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}